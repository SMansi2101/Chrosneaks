<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrosneaks Shop</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/stylesheets/shopstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body class="bg-gray-100">
    <%- include('partials/header') %>
    <% if (success && success.length > 0) { %>
        <div class="notification-box show">
            <span class="notification-text">
                <%= success %>
            </span>
        </div>
    <% } %>
    <div>
        <h1 class="text-2xl font-bold logo md:text-3xl">
            <span class="chro">Chro</span><span class="sneaks">sneaks</span>
        </h1>
    </div>
    <div class="flex flex-col md:flex-row min-h-screen pt-16">
        <!-- Sidebar -->
        <div class="w-full md:w-64 p-4 shadow-lg sidebar-container md:fixed md:left-0 md:top-16 md:h-screen md:overflow-y-auto">
            <nav class="space-y-6">
                <div>
                    <h3 class="text-lg font-semibold">Sort By</h3>
                    <ul class="pl-4 space-y-2">
                        <li><a href="#">Newest</a></li>
                        <li><a href="#">Popular</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold">Categories</h3>
                    <ul class="pl-4 space-y-2">
                        <li><a href="#">New Collection</a></li>
                        <li><a href="#">All Products</a></li>
                        <li><a href="#">Discounted Products</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold">Filter By</h3>
                    <ul class="pl-4 space-y-2">
                        <li><a href="#">Availability</a></li>
                        <li><a href="#">Discount</a></li>
                    </ul>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-4 md:p-8 md:ml-64">
            <h1 class="text-2xl font-bold text-gray-800 mb-8 md:text-3xl">Shop</h1>
            <!-- Products grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <% products.forEach(function(product){ %>
                    <!-- Placeholder for product items -->
                    <div class="p-4 shadow rounded-lg product-container"
                        style="background-color: <%= product.bgcolor %>;">
                        <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                            alt="Product Image" class="w-full h-62 object-cover mb-4 rounded-lg">
                        <h2 class="text-xl font-semibold" style="color: <%= product.textcolor %>;">
                            <%= product.name %>
                        </h2>
                        <p style="color: <%= product.textcolor %>;">
                            <%= product.description %>
                        </p>
                        <div class="mt-4 flex justify-between items-center">
                            <span class="text-lg font-bold" style="color: <%= product.textcolor %>;">
                                <%= product.price %> Rs.
                            </span>
                            <a href="/addtocart/<%= product._id %>"
                                class="text-4xl font-bold hover:text-blue-600 cart-icon"
                                style="color: <%= product.textcolor %>;">
                                <i class="fa-solid fa-cart-plus"></i>
                            </a>
                        </div>
                        <div class="mt-2">
                            <span class="text-lg font-bold" style="color: <%= product.textcolor %>;">
                                <%= product.discount %>
                            </span>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const notificationBox = document.querySelector('.notification-box');
            if (notificationBox) {
                notificationBox.classList.add('show');
                setTimeout(function () {
                    notificationBox.classList.remove('show');
                    notificationBox.classList.add('hidden');
                }, 3000); // Time in milliseconds (3 seconds here)
            }
        });
    </script>
</body>

</html>
